"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7677],{26535:function(e,t,n){n.d(t,{Z:function(){return g}});var a=n(1413),r=n(95313),i=n(62591),s=n(43360),o=n(42982),c=n(72791),u=n(8116),l=n(80184),d=function(e,t){var n=t-e+1;return Array.from({length:n},(function(t,n){return n+e}))},p=function(e){var t=e.search,n=e.pagination,r=e.onChange,i=e.siblingCount,s=void 0===i?1:i,p=e.className,g=function(e){var t=e.totalCount,n=e.pageSize,a=e.siblingCount,r=void 0===a?1:a,i=e.currentPage;return(0,c.useMemo)((function(){var e=Math.ceil(t/n);if(r+5>=e)return d(1,e);var a=Math.max(i-r,1),s=Math.min(i+r,e),c=a>2,u=s<e-2,l=1,p=e;if(!c&&u){var g=d(1,3+2*r);return[].concat((0,o.Z)(g),["DOTS",e])}if(c&&!u){var h=d(e-(3+2*r)+1,e);return[l,"DOTS"].concat((0,o.Z)(h))}if(c&&u){var f=d(a,s);return[l,"DOTS"].concat((0,o.Z)(f),["DOTS",p])}}),[t,n,r,i])}({currentPage:n.page,totalCount:n.totalCount,pageSize:n.pageSize,siblingCount:s});if(0===n.page||g.length<1)return null;var h=g[g.length-1];return(0,l.jsxs)(u.Z,{className:p,children:[(0,l.jsx)(u.Z.First,{onClick:function(){r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:1})})}}),(0,l.jsx)(u.Z.Prev,{onClick:function(){n.page>1&&r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:n.page-1})})}}),g.map((function(e,i){return"DOTS"===e?(0,l.jsx)(u.Z.Ellipsis,{},i):n.page===e?(0,l.jsx)(u.Z.Item,{active:!0,onClick:function(){return r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:e})})},children:e},i):(0,l.jsx)(u.Z.Item,{onClick:function(){return r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:e})})},children:e},i)})),(0,l.jsx)(u.Z.Next,{onClick:function(){n.page<h&&r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:n.page+1})})}}),(0,l.jsx)(u.Z.Last,{onClick:function(){r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:h})})}})]})},g=function(e){var t=e.pageItems,n=void 0===t?[5,10,20,50,100]:t,o=e.columns,c=e.data,u=void 0===c?[]:c,d=e.options,g=void 0===d?{responsive:!0,bordered:!0,center:!0}:d,h=e.pagination,f=void 0===h?{page:1,totalCount:10,pageSize:10}:h,m=e.sort,x=e.search,Z=e.onChange,y=e.emptyText,v=void 0===y?"Empty Data":y,j=e.onRow,k=void 0===j?function(){}:j;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,l.jsx)(r.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:f.pageSize,onChange:function(e){return Z({search:x,pagination:(0,a.Z)((0,a.Z)({},f),{},{pageSize:Number(e.target.value),page:1})})},children:n.map((function(e,t){return(0,l.jsx)("option",{value:e,children:e},t)}))}),(0,l.jsx)(r.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&Z({search:e.target.value,pagination:(0,a.Z)((0,a.Z)({},f),{},{page:1})})}(e)}})]}),(0,l.jsxs)(i.Z,{className:"datatable "+(g.center?"text-center":""),responsive:g.responsive,bordered:g.bordered,hover:!0,children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:o.map((function(e,t){return(0,l.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,l.jsxs)(s.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,t){var n="asc";void 0===t?n="asc":"asc"===t.dir?n="desc":"desc"===t.dir&&(n="asc"),Z({search:x,pagination:f,sort:{key:e,dir:n}})}(e.key,m)},children:[("undefined"===typeof m||m.key!==e.key)&&(0,l.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof m&&m.key===e.key&&"asc"===m.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof m&&m.key===e.key&&"desc"===m.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},t)}))})}),(0,l.jsx)("tbody",{children:u.length?u.map((function(e,t){return(0,l.jsx)("tr",{onClick:function(){return k(e._id)},children:o.map((function(n,a){return n.render?(0,l.jsx)("td",{children:n.render(e,t)},a):(0,l.jsx)("td",{children:e[n.key]},a)}))},t)})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:o.length,className:"text-center text-danger",children:v})})})]}),(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,l.jsx)(p,{search:x,pagination:f,onChange:Z})})]})}},67677:function(e,t,n){n.r(t);var a=n(74165),r=n(1413),i=n(15861),s=n(70885),o=n(72791),c=n(9140),u=n(89743),l=n(2677),d=n(18268),p=n(43623),g=n(85239),h=n(26535),f=n(72426),m=n.n(f),x=n(80184);d.kL.register(d.uw,d.f$,d.od,d.jn,d.Dx,d.u,d.De);t.default=function(){var e=(0,o.useState)(0),t=(0,s.Z)(e,2),n=t[0],d=t[1],f=(0,o.useState)([]),Z=(0,s.Z)(f,2),y=Z[0],v=Z[1],j=(0,o.useState)(""),k=(0,s.Z)(j,2),b=k[0],S=k[1],C=(0,o.useState)(),w=(0,s.Z)(C,2),N=w[0],D=w[1],z=(0,o.useState)({page:1,totalCount:0,pageSize:10}),A=(0,s.Z)(z,2),M=A[0],P=A[1],I=(0,o.useState)([]),T=(0,s.Z)(I,2),Y=T[0],O=T[1],R=(0,o.useState)([]),E=(0,s.Z)(R,2),L=E[0],B=E[1],H={labels:Y,datasets:[{label:"Income",data:L,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},J=(0,o.useState)([]),U=(0,s.Z)(J,2),_=U[0],F=U[1],K={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Income",data:_,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},W=(0,o.useState)([]),q=(0,s.Z)(W,2),V=q[0],$=q[1],G=(0,o.useState)([]),Q=(0,s.Z)(G,2),X=Q[0],ee=Q[1],te={labels:V,datasets:[{label:"Income",data:X,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},ne=[{key:"_id",name:"No",width:65,render:function(e,t){return t+1}},{key:"transaction_id",name:"Transaction number"},{key:"user",name:"User",render:function(e,t){return e.user.firstName+" "+e.user.lastName}},{key:"amount",name:"Amount",width:120},{key:"currency",name:"Currency",width:120},{key:"type",name:"Payment type",width:160},{key:"createdAt",name:"Paid date",render:function(e){return m()(e.createdAt).format("YYYY-MM-DD HH:mm:ss")},width:180}];(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.get("admin/transactions",{params:{search:b,length:M.pageSize,page:M.page,sortKey:N?N.key:"",sortDir:N?N.dir:""}});case 2:t=e.sent,n=t.data,v(n.data),P((0,r.Z)((0,r.Z)({},M),{},{totalCount:n.totalCount}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.get("admin/transactions/get-statistics");case 2:t=e.sent,n=t.data,O(n.weeklyStatistics.map((function(e){return m()(e.date).format("YYYY/MM/DD")}))),B(n.weeklyStatistics.map((function(e){return e.amount}))),F(n.monthlyStatistics.map((function(e){return e.amount}))),$(n.annuallyStatistics.map((function(e){return e.year}))),ee(n.annuallyStatistics.map((function(e){return e.amount})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(c.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,x.jsx)(c.Z.Title,{as:"h5",bsPrefix:"mb-0 card-title text-light",children:"Sales management"})}),(0,x.jsxs)(c.Z.Body,{children:[(0,x.jsxs)(u.Z,{children:[(0,x.jsx)(l.Z,{md:4,children:(0,x.jsx)("div",{style:{margin:".5rem"},children:(0,x.jsx)(p.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Last 7 days sales"}}},data:H,height:300})})}),(0,x.jsx)(l.Z,{md:4,children:(0,x.jsx)("div",{style:{margin:".5rem"},children:(0,x.jsx)(p.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Monthly sales"}}},data:K,height:300})})}),(0,x.jsx)(l.Z,{md:4,children:(0,x.jsx)("div",{style:{margin:".5rem"},children:(0,x.jsx)(p.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Annually sales"}}},data:te,height:300})})})]}),(0,x.jsx)("hr",{}),(0,x.jsx)(h.Z,{columns:ne,data:y,sort:N,search:b,pagination:M,onChange:function(e){var t=e.search,a=e.pagination,r=e.sort;D(r),S(t),P(a),d(!n)}})]})]})}},85239:function(e,t,n){var a=n(61044),r=function(){return window.localStorage.getItem("token")?localStorage.getItem("token"):null},i=a.ZP.create({baseURL:"/api/v1/",timeout:15e3,headers:{Authorization:"Bearer ".concat(r())}});i.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(r()),e})),i.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status&&403!==e.response.status&&406!==e.response.status||(window.localStorage.clear(),window.location.href="/login"),Promise.reject(e)})),t.Z=i}}]);
//# sourceMappingURL=7677.28822aee.chunk.js.map