"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[43],{37425:function(e,a,t){t.r(a);var n=t(1413),r=t(74165),s=t(15861),i=t(70885),c=t(72791),o=t(9140),u=t(95313),l=t(43360),d=t(55705),f=t(81724),v=t(85239),p=t(9085),m=t(57689),b=t(80184);a.default=function(){var e=(0,m.UO)(),a=(0,m.s0)(),t=(0,c.useState)([]),Z=(0,i.Z)(t,2),h=Z[0],x=Z[1],j=(0,c.useState)([]),g=(0,i.Z)(j,2),y=g[0],N=g[1],C=(0,c.useState)({year:"",subject:"",name:"",description:""}),P=(0,i.Z)(C,2),w=P[0],k=P[1],S=f.Ry({subject:f.Z_("Choose a subject.").required("Subject is required."),name:f.Z_("Enter a topic name.").test("len","Must be less than 64 characters.",(function(e){return e.length<64})).required("Topic name is required.")});(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.get("admin/years/get-all-populate");case 2:a=e.sent,t=a.data,x(t),N(t.length?t[0].subjects:[]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.useEffect)((function(){var a=function(){var a=(0,s.Z)((0,r.Z)().mark((function a(){var t,s,i;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,v.Z.get("admin/topics/".concat(t));case 3:s=a.sent,(i=s.data).success?k((0,n.Z)((0,n.Z)({},w),{},{year:i.data.subject.year._id,subject:i.data.subject._id,name:i.data.name,description:i.data.description})):p.Am.error(i.msg);case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();a()}),[]);var B=function(e){var a=h.findIndex((function(a){return a._id===e.target.value}));N(h[a].subjects),k((0,n.Z)((0,n.Z)({},w),{},{year:h[a]._id,subject:h[a].subjects.length?h[a].subjects[0]._id:""}))},O=function(e){k((0,n.Z)((0,n.Z)({},w),{},{subject:e.target.value}))},R=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n,s){var i,c,o,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.resetForm,c=e.id,t.next=4,v.Z.put("admin/topics/".concat(c),n);case 4:o=t.sent,(u=o.data).success?(p.Am.success(u.msg),i(),a("/admin/topics")):p.Am.error(u.msg);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(o.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,b.jsx)(o.Z.Title,{bsPrefix:"card-title mb-0 text-light",as:"h5",children:"Edit topic"})}),(0,b.jsx)(o.Z.Body,{children:(0,b.jsx)(d.J9,{validationSchema:S,validateOnChange:!1,validateOnBlur:!1,onSubmit:R,initialValues:w,enableReinitialize:!0,children:function(e){var a=e.handleSubmit,t=e.handleChange,n=e.handleBlur,r=e.values,s=e.touched,i=e.errors;return(0,b.jsxs)(u.Z,{noValidate:!0,onSubmit:a,children:[(0,b.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,b.jsx)(u.Z.Label,{children:"Year:"}),(0,b.jsx)(u.Z.Select,{name:"year",value:w.year,onChange:B,onBlur:n,touched:s,isInvalid:!!i.year,children:h.map((function(e,a){return(0,b.jsx)("option",{value:e._id,children:e.name},a)}))}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:i.year})]}),(0,b.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,b.jsx)(u.Z.Label,{children:"Subject:"}),(0,b.jsx)(u.Z.Select,{name:"subject",value:w.subject,onChange:O,onBlur:n,touched:s,isInvalid:!!i.subject,children:y.map((function(e,a){return(0,b.jsx)("option",{value:e._id,children:e.name},a)}))}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:i.subject})]}),(0,b.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,b.jsx)(u.Z.Label,{children:"Topic:"}),(0,b.jsx)(u.Z.Control,{type:"text",placeholder:"Please enter a topic name.",name:"name",onChange:t,onBlur:n,value:r.name,touched:s,isInvalid:!!i.name}),(0,b.jsx)(u.Z.Control.Feedback,{type:"invalid",children:i.name})]}),(0,b.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,b.jsx)(u.Z.Label,{children:"Description:"}),(0,b.jsx)(u.Z.Control,{as:"textarea",placeholder:"Please enter a topic description.",name:"description",onChange:t,onBlur:n,value:r.description,rows:10})]}),(0,b.jsxs)(l.Z,{type:"submit",variant:"primary",className:"float-end",children:[(0,b.jsx)("i",{className:"fa fa-save"})," Update"]})]})}})})]})}},85239:function(e,a,t){var n=t(61044),r=function(){return window.localStorage.getItem("token")?localStorage.getItem("token"):null},s=n.ZP.create({baseURL:"/api/v1/",timeout:15e3,headers:{Authorization:"Bearer ".concat(r())}});s.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(r()),e})),s.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status&&403!==e.response.status&&406!==e.response.status||(window.localStorage.clear(),window.location.href="/login"),Promise.reject(e)})),a.Z=s},15341:function(e,a,t){t.d(a,{FT:function(){return c}});var n=t(70885),r=t(72791),s=t(80184),i=["as","disabled"];function c(e){var a=e.tagName,t=e.disabled,n=e.href,r=e.target,s=e.rel,i=e.role,c=e.onClick,o=e.tabIndex,u=void 0===o?0:o,l=e.type;a||(a=null!=n||null!=r||null!=s?"a":"button");var d={tagName:a};if("button"===a)return[{type:l||"button",disabled:t},d];var f=function(e){(t||"a"===a&&function(e){return!e||"#"===e.trim()}(n))&&e.preventDefault(),t?e.stopPropagation():null==c||c(e)};return"a"===a&&(n||(n="#"),t&&(n=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:t?void 0:u,href:n,target:"a"===a?r:void 0,"aria-disabled":t||void 0,rel:"a"===a?s:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},d]}var o=r.forwardRef((function(e,a){var t=e.as,r=e.disabled,o=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,i),u=c(Object.assign({tagName:t,disabled:r},o)),l=(0,n.Z)(u,2),d=l[0],f=l[1].tagName;return(0,s.jsx)(f,Object.assign({},o,d,{ref:a}))}));o.displayName="Button",a.ZP=o},43360:function(e,a,t){var n=t(1413),r=t(70885),s=t(45987),i=t(81694),c=t.n(i),o=t(72791),u=t(15341),l=t(10162),d=t(80184),f=["as","bsPrefix","variant","size","active","className"],v=o.forwardRef((function(e,a){var t=e.as,i=e.bsPrefix,o=e.variant,v=e.size,p=e.active,m=e.className,b=(0,s.Z)(e,f),Z=(0,l.vE)(i,"btn"),h=(0,u.FT)((0,n.Z)({tagName:t},b)),x=(0,r.Z)(h,2),j=x[0],g=x[1].tagName;return(0,d.jsx)(g,(0,n.Z)((0,n.Z)((0,n.Z)({},j),b),{},{ref:a,className:c()(m,Z,p&&"active",o&&"".concat(Z,"-").concat(o),v&&"".concat(Z,"-").concat(v),b.href&&b.disabled&&"disabled")}))}));v.displayName="Button",v.defaultProps={variant:"primary",active:!1,disabled:!1},a.Z=v},9140:function(e,a,t){t.d(a,{Z:function(){return O}});var n=t(1413),r=t(45987),s=t(81694),i=t.n(s),c=t(72791),o=t(10162),u=t(66543),l=t(27472),d=t(80184),f=["bsPrefix","className","variant","as"],v=c.forwardRef((function(e,a){var t=e.bsPrefix,s=e.className,c=e.variant,u=e.as,l=void 0===u?"img":u,v=(0,r.Z)(e,f),p=(0,o.vE)(t,"card-img");return(0,d.jsx)(l,(0,n.Z)({ref:a,className:i()(c?"".concat(p,"-").concat(c):p,s)},v))}));v.displayName="CardImg";var p=v,m=t(96040),b=["bsPrefix","className","as"],Z=c.forwardRef((function(e,a){var t=e.bsPrefix,s=e.className,u=e.as,l=void 0===u?"div":u,f=(0,r.Z)(e,b),v=(0,o.vE)(t,"card-header"),p=(0,c.useMemo)((function(){return{cardHeaderBsPrefix:v}}),[v]);return(0,d.jsx)(m.Z.Provider,{value:p,children:(0,d.jsx)(l,(0,n.Z)((0,n.Z)({ref:a},f),{},{className:i()(s,v)}))})}));Z.displayName="CardHeader";var h=Z,x=["bsPrefix","className","bg","text","border","body","children","as"],j=(0,l.Z)("h5"),g=(0,l.Z)("h6"),y=(0,u.Z)("card-body"),N=(0,u.Z)("card-title",{Component:j}),C=(0,u.Z)("card-subtitle",{Component:g}),P=(0,u.Z)("card-link",{Component:"a"}),w=(0,u.Z)("card-text",{Component:"p"}),k=(0,u.Z)("card-footer"),S=(0,u.Z)("card-img-overlay"),B=c.forwardRef((function(e,a){var t=e.bsPrefix,s=e.className,c=e.bg,u=e.text,l=e.border,f=e.body,v=e.children,p=e.as,m=void 0===p?"div":p,b=(0,r.Z)(e,x),Z=(0,o.vE)(t,"card");return(0,d.jsx)(m,(0,n.Z)((0,n.Z)({ref:a},b),{},{className:i()(s,Z,c&&"bg-".concat(c),u&&"text-".concat(u),l&&"border-".concat(l)),children:f?(0,d.jsx)(y,{children:v}):v}))}));B.displayName="Card",B.defaultProps={body:!1};var O=Object.assign(B,{Img:p,Title:N,Subtitle:C,Body:y,Link:P,Text:w,Header:h,Footer:k,ImgOverlay:S})},96040:function(e,a,t){var n=t(72791).createContext(null);n.displayName="CardHeaderContext",a.Z=n},66543:function(e,a,t){t.d(a,{Z:function(){return v}});var n=t(1413),r=t(45987),s=t(81694),i=t.n(s),c=/-(.)/g;var o=t(72791),u=t(10162),l=t(80184),d=["className","bsPrefix","as"],f=function(e){return e[0].toUpperCase()+(a=e,a.replace(c,(function(e,a){return a.toUpperCase()}))).slice(1);var a};function v(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.displayName,s=void 0===t?f(e):t,c=a.Component,v=a.defaultProps,p=o.forwardRef((function(a,t){var s=a.className,o=a.bsPrefix,f=a.as,v=void 0===f?c||"div":f,p=(0,r.Z)(a,d),m=(0,u.vE)(o,e);return(0,l.jsx)(v,(0,n.Z)({ref:t,className:i()(s,m)},p))}));return p.defaultProps=v,p.displayName=s,p}},27472:function(e,a,t){var n=t(1413),r=t(72791),s=t(81694),i=t.n(s),c=t(80184);a.Z=function(e){return r.forwardRef((function(a,t){return(0,c.jsx)("div",(0,n.Z)((0,n.Z)({},a),{},{ref:t,className:i()(a.className,e)}))}))}},42391:function(e){var a=function(){};e.exports=a},11752:function(e,a,t){t.d(a,{Z:function(){return s}});var n=t(61120);function r(e,a){for(;!Object.prototype.hasOwnProperty.call(e,a)&&null!==(e=(0,n.Z)(e)););return e}function s(){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,a,t){var n=r(e,a);if(n){var s=Object.getOwnPropertyDescriptor(n,a);return s.get?s.get.call(arguments.length<3?e:t):s.value}},s.apply(this,arguments)}}}]);
//# sourceMappingURL=43.2629bb7a.chunk.js.map