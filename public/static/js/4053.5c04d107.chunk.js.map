{"version":3,"file":"static/js/4053.5c04d107.chunk.js","mappings":"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","sources":["pages/admin/EditSubTopic.jsx","services/Http.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\r\nimport { Card, Form, Button } from 'react-bootstrap'\r\nimport { Formik } from 'formik'\r\nimport * as yup from 'yup'\r\nimport Http from '../../services/Http'\r\nimport { toast } from 'react-toastify'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { Editor } from '@tinymce/tinymce-react'\r\n\r\nconst EditSubTopic = () => {\r\n  const params = useParams()\r\n  const editorRef = useRef(null)\r\n  const navigate = useNavigate()\r\n  const [years, setYears] = useState([])\r\n  const [subjects, setSubjects] = useState([])\r\n  const [modules, setModules] = useState([])\r\n  const [topics, setTopics] = useState([])\r\n  const [subTopic, setSubTopic] = useState({\r\n    year: '',\r\n    subject: '',\r\n    module: '',\r\n    topic: '',\r\n    name: '',\r\n    content: '',\r\n    permission: 0\r\n  })\r\n  const validationSchema = yup.object({\r\n    year: yup.string('Choose a year.').required('Year is required.'),\r\n    subject: yup.string('Choose a subject.').required('Subject is required'),\r\n    module: yup.string('Choose a module.').required('Module is required.'),\r\n    topic: yup.string('Choose a topic.').required('Topic is required.'),\r\n    name: yup\r\n      .string('Enter a sub topic name.')\r\n      .test(\r\n        'len',\r\n        'Must be less than or equal to 64 characters.',\r\n        function (val) {\r\n          if (!val) val = ''\r\n          return val.length <= 64\r\n        }\r\n      )\r\n      .required('Please enter a name.')\r\n  })\r\n\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      let { data } = await Http.get('/admin/years/get-all-populate')\r\n      setYears(data)\r\n      setSubjects(data.length ? data[0].subjects : [])\r\n      setModules(\r\n        data.length && data[0].subjects.length\r\n          ? data[0].subjects[0].modules\r\n          : []\r\n      )\r\n      setTopics(\r\n        data.length &&\r\n          data[0].subjects.length &&\r\n          data[0].subjects[0].modules.length\r\n          ? data[0].subjects[0].modules[0].topics\r\n          : []\r\n      )\r\n      setSubTopic({\r\n        ...subTopic,\r\n        year: data.length ? data[0]._id : '',\r\n        subject:\r\n          data.length && data[0].subjects.length ? data[0].subjects[0]._id : '',\r\n        module:\r\n          data.length &&\r\n          data[0].subjects.length &&\r\n          data[0].subjects[0].modules.length\r\n            ? data[0].subjects[0].modules[0]._id\r\n            : '',\r\n        topic:\r\n          data.length &&\r\n          data[0].subjects.length &&\r\n          data[0].subjects[0].modules.length &&\r\n          data[0].subjects[0].modules[0].topics.length\r\n            ? data[0].subjects[0].modules[0].topics[0]._id\r\n            : ''\r\n      })\r\n    })()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      let { id } = params\r\n      let { data } = await Http.get(`/admin/sub-topics/${id}`)\r\n      if (data.success) {\r\n        setSubTopic({\r\n          ...subTopic,\r\n          year: data.data.topic.module.subject.year._id,\r\n          subject: data.data.topic.module.subject._id,\r\n          module: data.data.topic.module._id,\r\n          topic: data.data.topic._id,\r\n          name: data.data.name,\r\n          content: data.data.content,\r\n          permission: data.data.permission\r\n        })\r\n      } else {\r\n        toast.error(data.msg)\r\n      }\r\n    })()\r\n  }, [])\r\n\r\n  const onChangeYear = ev => {\r\n    let idx = years.findIndex(year => year._id === ev.target.value)\r\n    setSubjects(years[idx].subjects)\r\n    setModules(years[idx].subjects.length ? years[idx].subjects[0].modules : [])\r\n    setTopics(\r\n      years[idx].subjects.length && years[idx].subjects[0].modules.length\r\n        ? years[idx].subjects[0].modules[0].topics\r\n        : []\r\n    )\r\n    setSubTopic({\r\n      ...subTopic,\r\n      year: ev.target.value,\r\n      subject: years[idx].subjects.length ? years[idx].subjects[0]._id : '',\r\n      module:\r\n        years[idx].subjects.length && years[idx].subjects[0].modules.length\r\n          ? years[idx].subjects[0].modules[0]._id\r\n          : '',\r\n      topic:\r\n        years[idx].subjects.length && years[idx].subjects[0].topics.length\r\n          ? years[idx].subjects[0].topics[0]._id\r\n          : ''\r\n    })\r\n  }\r\n\r\n  const onChangeSubject = ev => {\r\n    let idx = subjects.findIndex(subject => subject._id === ev.target.value)\r\n    setModules(subjects[idx].modules)\r\n    setTopics(\r\n      subjects[idx].modules.length ? subjects[idx].modules[0].topics : []\r\n    )\r\n    setSubTopic({\r\n      ...subTopic,\r\n      subject: ev.target.value,\r\n      module: subjects[idx].modules.length ? subjects[idx].modules[0]._id : '',\r\n      topic:\r\n        subjects[idx].modules.length && subjects[idx].modules[0].topics.length\r\n          ? subjects[idx].modules[0].topics[0]._id\r\n          : ''\r\n    })\r\n  }\r\n\r\n  const onChangeModule = ev => {\r\n    let idx = modules.findIndex(module => module._id === ev.target.value)\r\n    setTopics(modules[idx].topics)\r\n    setSubTopic({\r\n      ...subTopic,\r\n      module: ev.target.value,\r\n      topic: modules[idx].topics.length ? modules[idx].topics[0]._id : ''\r\n    })\r\n  }\r\n\r\n  const onChangeTopic = ev => {\r\n    setSubTopic({\r\n      ...subTopic,\r\n      topic: ev.target.value\r\n    })\r\n  }\r\n\r\n  const onChangePermission = ev => {\r\n    setSubTopic({\r\n      ...subTopic,\r\n      permission: Number(ev.target.value)\r\n    })\r\n  }\r\n\r\n  const onUpdate = async (subTopic, { resetForm }) => {\r\n    let { id } = params\r\n    subTopic.content = editorRef.current.getContent()\r\n    let { data } = await Http.put(`admin/sub-topics/${id}`, subTopic)\r\n    if (data.success) {\r\n      toast.success(data.msg)\r\n      resetForm()\r\n      navigate('/admin/sub-topics')\r\n    } else {\r\n      toast.error(data.msg)\r\n    }\r\n  }\r\n  return (\r\n    <Card>\r\n      <Card.Header\r\n        style={{ background: '#3c4b64' }}\r\n        bsPrefix='card-header py-3'\r\n      >\r\n        <Card.Title bsPrefix='card-title mb-0 text-light' as='h5'>\r\n          Edit subtopic\r\n        </Card.Title>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        <Formik\r\n          validationSchema={validationSchema}\r\n          validateOnChange={false}\r\n          validateOnBlur={false}\r\n          onSubmit={onUpdate}\r\n          initialValues={subTopic}\r\n          enableReinitialize\r\n        >\r\n          {({\r\n            handleSubmit,\r\n            handleChange,\r\n            handleBlur,\r\n            values,\r\n            touched,\r\n            errors\r\n          }) => (\r\n            <Form noValidate onSubmit={handleSubmit}>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Label>Year:</Form.Label>\r\n                <Form.Select\r\n                  name='year'\r\n                  value={values.year}\r\n                  onChange={onChangeYear}\r\n                  onBlur={handleBlur}\r\n                  touched={touched}\r\n                  isInvalid={!!errors.year}\r\n                >\r\n                  {years.map((year, idx) => (\r\n                    <option key={idx} value={year._id}>\r\n                      {year.name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Select>\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {errors.year}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Label>Subject:</Form.Label>\r\n                <Form.Select\r\n                  name='subject'\r\n                  value={values.subject}\r\n                  onChange={onChangeSubject}\r\n                  onBlur={handleBlur}\r\n                  touched={touched}\r\n                  isInvalid={!!errors.subject}\r\n                >\r\n                  {subjects.map((subject, idx) => (\r\n                    <option key={idx} value={subject._id}>\r\n                      {subject.name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Select>\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {errors.subject}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Label>Module:</Form.Label>\r\n                <Form.Select\r\n                  name='module'\r\n                  value={values.module}\r\n                  onChange={onChangeModule}\r\n                  onBlur={handleBlur}\r\n                  touched={touched}\r\n                  isInvalid={!!errors.module}\r\n                >\r\n                  {modules.map((module, idx) => (\r\n                    <option key={idx} value={module._id}>\r\n                      {module.name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Select>\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {errors.module}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Label>Topic:</Form.Label>\r\n                <Form.Select\r\n                  name='topic'\r\n                  value={subTopic.topic}\r\n                  onChange={onChangeTopic}\r\n                  onBlur={handleBlur}\r\n                  touched={touched}\r\n                  isInvalid={!!errors.topic}\r\n                >\r\n                  {topics.map((topic, idx) => (\r\n                    <option key={idx} value={topic._id}>\r\n                      {topic.name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Select>\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {errors.topic}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Label>Name:</Form.Label>\r\n                <Form.Control\r\n                  type='text'\r\n                  placeholder='Please enter a sub topic name.'\r\n                  name='name'\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  value={values.name}\r\n                  touched={touched}\r\n                  isInvalid={!!errors.name}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {errors.name}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Check\r\n                  inline\r\n                  type='radio'\r\n                  name='permission'\r\n                  label='Open'\r\n                  id='permission-1'\r\n                  value='0'\r\n                  checked={values.permission === 0}\r\n                  onChange={onChangePermission}\r\n                  onBlur={handleBlur}\r\n                />\r\n                <Form.Check\r\n                  inline\r\n                  type='radio'\r\n                  name='permission'\r\n                  label='Free'\r\n                  id='permission-2'\r\n                  value='1'\r\n                  checked={values.permission === 1}\r\n                  onChange={onChangePermission}\r\n                  onBlur={handleBlur}\r\n                />\r\n                <Form.Check\r\n                  inline\r\n                  type='radio'\r\n                  name='permission'\r\n                  label='Premium'\r\n                  id='permission-3'\r\n                  value='2'\r\n                  checked={values.permission === 2}\r\n                  onChange={onChangePermission}\r\n                  onBlur={handleBlur}\r\n                />\r\n              </Form.Group>\r\n              <Form.Group className='mb-3'>\r\n                <Form.Label>Description:</Form.Label>\r\n                <Editor\r\n                  tinymceScriptSrc={\r\n                    process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'\r\n                  }\r\n                  onInit={(ev, editor) => (editorRef.current = editor)}\r\n                  init={{\r\n                    height: 450,\r\n                    menubar: true,\r\n                    plugins: [\r\n                      'image',\r\n                      'grid',\r\n                      'tiny_mce_wiris',\r\n                      'code',\r\n                      'table',\r\n                      'link',\r\n                      'media',\r\n                      'codesample'\r\n                    ],\r\n                    toolbar:\r\n                      'undo redo | formatselect | ' +\r\n                      'bold italic backcolor | alignleft aligncenter ' +\r\n                      'alignright alignjustify | bullist numlist outdent indent | ' +\r\n                      'removeformat | grid_insert | tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry | help',\r\n                    draggable_modal: true,\r\n                    init_instance_callback: function (editor) {\r\n                      editor.contentWindow.addEventListener(\r\n                        'copy',\r\n                        function (ev) {\r\n                          ev.preventDefault()\r\n                        }\r\n                      )\r\n                      editor.contentWindow.addEventListener(\r\n                        'paste',\r\n                        function (ev) {\r\n                          ev.preventDefault()\r\n                        }\r\n                      )\r\n                      editor.contentWindow.addEventListener(\r\n                        'keydown',\r\n                        function (ev) {\r\n                          if (\r\n                            (ev.ctrlKey || ev.metaKey) &&\r\n                            (ev.key === 'p' ||\r\n                              ev.charCode === 16 ||\r\n                              ev.charCode === 112 ||\r\n                              ev.keyCode === 80)\r\n                          ) {\r\n                            ev.cancelBubble = true\r\n                            ev.preventDefault()\r\n                            ev.stopImmediatePropagation()\r\n                          }\r\n                        }\r\n                      )\r\n                    },\r\n                    content_style:\r\n                      'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'\r\n                  }}\r\n                  name='content'\r\n                  initialValue={values.content}\r\n                />\r\n              </Form.Group>\r\n              <Button type='submit' variant='primary' className='float-end'>\r\n                <i className='fa fa-save'></i> Save\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Card.Body>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default EditSubTopic\r\n","import axios from \"axios\";\r\nconst getToken = () => {\r\n    return window.localStorage.getItem(\"token\") ? localStorage.getItem(\"token\") : null;\r\n}\r\n\r\nconst http = axios.create({\r\n    // baseURL: \"http://localhost:5000/api/v1/\",\r\n    baseURL: \"/api/v1/\",\r\n    timeout: 15000,\r\n    headers: {\r\n        Authorization: `Bearer ${getToken()}`\r\n    }\r\n});\r\n\r\nhttp.interceptors.request.use(function(config) {\r\n    config.headers.Authorization = `Bearer ${getToken()}`;\r\n    return config;\r\n});\r\nhttp.interceptors.response.use(function(response) {\r\n    return response;\r\n}, function(err) {\r\n    if (err.response.status === 401 || err.response.status === 403 || err.response.status === 406) {\r\n        window.localStorage.clear();\r\n        window.location.href = \"/login\";\r\n    } \r\n    return Promise.reject(err);\r\n});\r\n\r\nexport default http;"],"names":["params","useParams","editorRef","useRef","navigate","useNavigate","useState","years","setYears","subjects","setSubjects","modules","setModules","topics","setTopics","year","subject","module","topic","name","content","permission","subTopic","setSubTopic","validationSchema","yup","required","test","val","length","useEffect","Http","data","_id","id","success","toast","msg","onChangeYear","ev","idx","findIndex","target","value","onChangeSubject","onChangeModule","onChangeTopic","onChangePermission","Number","onUpdate","resetForm","current","getContent","style","background","bsPrefix","as","validateOnChange","validateOnBlur","onSubmit","initialValues","enableReinitialize","handleSubmit","handleChange","handleBlur","values","touched","errors","noValidate","className","onChange","onBlur","isInvalid","map","type","placeholder","inline","label","checked","tinymceScriptSrc","onInit","editor","init","height","menubar","plugins","toolbar","draggable_modal","init_instance_callback","contentWindow","addEventListener","preventDefault","ctrlKey","metaKey","key","charCode","keyCode","cancelBubble","stopImmediatePropagation","content_style","initialValue","variant","getToken","window","localStorage","getItem","http","axios","baseURL","timeout","headers","Authorization","interceptors","request","use","config","response","err","status","clear","location","href","Promise","reject"],"sourceRoot":""}