"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5065],{86142:function(e,t,a){a.r(t);var n=a(74165),r=a(1413),s=a(15861),i=a(70885),o=a(72791),c=a(9140),l=a(95313),u=a(43360),d=a(55705),f=a(81724),m=a(85239),v=a(9085),b=a(57689),h=a(80184);t.default=function(){var e=(0,b.s0)(),t=(0,o.useState)([]),a=(0,i.Z)(t,2),p=a[0],Z=a[1],j=(0,o.useState)([]),x=(0,i.Z)(j,2),g=x[0],y=x[1],N=(0,o.useState)([]),C=(0,i.Z)(N,2),P=C[0],w=C[1],k=(0,o.useState)({year:"",subject:"",module:"",name:"",description:""}),S=(0,i.Z)(k,2),B=S[0],_=S[1],I=f.Ry({subject:f.Z_("Choose a subject.").required("Subject is required."),module:f.Z_("Choose a module").required("Module is required."),name:f.Z_("Enter a topic name.").test("len","Must be less than 64 characters.",(function(e){return e||(e=""),e.length<64})).required("Please enter a name.")});(0,o.useEffect)((function(){(0,s.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("admin/years/get-all-populate");case 2:t=e.sent,a=t.data,Z(a),y(a.length?a[0].subjects:[]),w(a.length?a[0].subjects[0].modules:[]),_((0,r.Z)((0,r.Z)({},B),{},{year:a.length?a[0]._id:"",subject:a.length&&a[0].subjects.length?a[0].subjects[0]._id:"",module:a.length&&a[0].subjects.length&&a[0].subjects[0].modules.length?a[0].subjects[0].modules[0]._id:""}));case 8:case"end":return e.stop()}}),e)})))()}),[]);var R=function(e){var t=p.findIndex((function(t){return t._id===e.target.value}));y(p[t].subjects),w(p[t].subjects.length?p[t].subjects[0].modules:[]),_((0,r.Z)((0,r.Z)({},B),{},{year:e.target.value,subject:p[t].subjects.length?p[t].subjects[0]._id:"",module:p[t].subjects.length&&p[t].subjects[0].modules.length?p[t].subjects[0].modules[0]._id:""}))},O=function(e){var t=g.findIndex((function(t){return t._id===e.target.value}));w(g[t].modules),_((0,r.Z)((0,r.Z)({},B),{},{subject:e.target.value,module:g[t].modules.length?g[t].modules[0]._id:""}))},F=function(e){_((0,r.Z)((0,r.Z)({},B),{},{module:e.target.value}))},E=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(a,r){var s,i,o;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.resetForm,t.next=3,m.Z.post("admin/topics",a);case 3:i=t.sent,(o=i.data).status?(v.Am.success(o.msg),s(),e("/admin/topics")):v.Am.error(o.msg);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return(0,h.jsxs)(c.Z,{children:[(0,h.jsx)(c.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,h.jsx)(c.Z.Title,{bsPrefix:"card-title mb-0 text-light",as:"h5",children:"Create topic"})}),(0,h.jsx)(c.Z.Body,{children:(0,h.jsx)(d.J9,{validationSchema:I,validateOnChange:!1,validateOnBlur:!1,onSubmit:E,initialValues:B,enableReinitialize:!0,children:function(e){var t=e.handleSubmit,a=e.handleChange,n=e.handleBlur,r=e.values,s=e.touched,i=e.errors;return(0,h.jsxs)(l.Z,{noValidate:!0,onSubmit:t,children:[(0,h.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,h.jsx)(l.Z.Label,{children:"Year:"}),(0,h.jsx)(l.Z.Select,{name:"year",value:r.year,onChange:R,onBlur:n,touched:s,isInvalid:!!i.year,children:p.map((function(e,t){return(0,h.jsx)("option",{value:e._id,children:e.name},t)}))}),(0,h.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.year})]}),(0,h.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,h.jsx)(l.Z.Label,{children:"Subject:"}),(0,h.jsx)(l.Z.Select,{name:"subject",value:r.subject,onChange:O,onBlur:n,touched:s,isInvalid:!!i.subject,children:g.map((function(e,t){return(0,h.jsx)("option",{value:e._id,children:e.name},t)}))}),(0,h.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.subject})]}),(0,h.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,h.jsx)(l.Z.Label,{children:"Module:"}),(0,h.jsx)(l.Z.Select,{name:"module",value:r.module,onChange:F,onBlur:n,touched:s,isInvalid:!!i.module,children:P.map((function(e,t){return(0,h.jsx)("option",{value:e._id,children:e.name},t)}))}),(0,h.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.module})]}),(0,h.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,h.jsx)(l.Z.Label,{children:"Topic:"}),(0,h.jsx)(l.Z.Control,{type:"text",placeholder:"Please enter a topic name.",name:"name",onChange:a,onBlur:n,value:r.name,touched:s,isInvalid:!!i.name}),(0,h.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.name})]}),(0,h.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,h.jsx)(l.Z.Label,{children:"Description:"}),(0,h.jsx)(l.Z.Control,{as:"textarea",placeholder:"Please enter a topic description.",name:"description",onChange:a,onBlur:n,value:r.description,rows:10})]}),(0,h.jsxs)(u.Z,{type:"submit",variant:"primary",className:"float-end",children:[(0,h.jsx)("i",{className:"fa fa-save"})," Save"]})]})}})})]})}},85239:function(e,t,a){var n=a(61044),r=function(){return window.localStorage.getItem("token")?localStorage.getItem("token"):null},s=n.ZP.create({baseURL:"/api/v1/",timeout:15e3,headers:{Authorization:"Bearer ".concat(r())}});s.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(r()),e})),s.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status&&403!==e.response.status&&406!==e.response.status||(window.localStorage.clear(),window.location.href="/login"),Promise.reject(e)})),t.Z=s},15341:function(e,t,a){a.d(t,{FT:function(){return o}});var n=a(70885),r=a(72791),s=a(80184),i=["as","disabled"];function o(e){var t=e.tagName,a=e.disabled,n=e.href,r=e.target,s=e.rel,i=e.role,o=e.onClick,c=e.tabIndex,l=void 0===c?0:c,u=e.type;t||(t=null!=n||null!=r||null!=s?"a":"button");var d={tagName:t};if("button"===t)return[{type:u||"button",disabled:a},d];var f=function(e){(a||"a"===t&&function(e){return!e||"#"===e.trim()}(n))&&e.preventDefault(),a?e.stopPropagation():null==o||o(e)};return"a"===t&&(n||(n="#"),a&&(n=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:a?void 0:l,href:n,target:"a"===t?r:void 0,"aria-disabled":a||void 0,rel:"a"===t?s:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},d]}var c=r.forwardRef((function(e,t){var a=e.as,r=e.disabled,c=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,i),l=o(Object.assign({tagName:a,disabled:r},c)),u=(0,n.Z)(l,2),d=u[0],f=u[1].tagName;return(0,s.jsx)(f,Object.assign({},c,d,{ref:t}))}));c.displayName="Button",t.ZP=c},43360:function(e,t,a){var n=a(1413),r=a(70885),s=a(45987),i=a(81694),o=a.n(i),c=a(72791),l=a(15341),u=a(10162),d=a(80184),f=["as","bsPrefix","variant","size","active","className"],m=c.forwardRef((function(e,t){var a=e.as,i=e.bsPrefix,c=e.variant,m=e.size,v=e.active,b=e.className,h=(0,s.Z)(e,f),p=(0,u.vE)(i,"btn"),Z=(0,l.FT)((0,n.Z)({tagName:a},h)),j=(0,r.Z)(Z,2),x=j[0],g=j[1].tagName;return(0,d.jsx)(g,(0,n.Z)((0,n.Z)((0,n.Z)({},x),h),{},{ref:t,className:o()(b,p,v&&"active",c&&"".concat(p,"-").concat(c),m&&"".concat(p,"-").concat(m),h.href&&h.disabled&&"disabled")}))}));m.displayName="Button",m.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=m},9140:function(e,t,a){a.d(t,{Z:function(){return _}});var n=a(1413),r=a(45987),s=a(81694),i=a.n(s),o=a(72791),c=a(10162),l=a(66543),u=a(27472),d=a(80184),f=["bsPrefix","className","variant","as"],m=o.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,o=e.variant,l=e.as,u=void 0===l?"img":l,m=(0,r.Z)(e,f),v=(0,c.vE)(a,"card-img");return(0,d.jsx)(u,(0,n.Z)({ref:t,className:i()(o?"".concat(v,"-").concat(o):v,s)},m))}));m.displayName="CardImg";var v=m,b=a(96040),h=["bsPrefix","className","as"],p=o.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,l=e.as,u=void 0===l?"div":l,f=(0,r.Z)(e,h),m=(0,c.vE)(a,"card-header"),v=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,d.jsx)(b.Z.Provider,{value:v,children:(0,d.jsx)(u,(0,n.Z)((0,n.Z)({ref:t},f),{},{className:i()(s,m)}))})}));p.displayName="CardHeader";var Z=p,j=["bsPrefix","className","bg","text","border","body","children","as"],x=(0,u.Z)("h5"),g=(0,u.Z)("h6"),y=(0,l.Z)("card-body"),N=(0,l.Z)("card-title",{Component:x}),C=(0,l.Z)("card-subtitle",{Component:g}),P=(0,l.Z)("card-link",{Component:"a"}),w=(0,l.Z)("card-text",{Component:"p"}),k=(0,l.Z)("card-footer"),S=(0,l.Z)("card-img-overlay"),B=o.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,o=e.bg,l=e.text,u=e.border,f=e.body,m=e.children,v=e.as,b=void 0===v?"div":v,h=(0,r.Z)(e,j),p=(0,c.vE)(a,"card");return(0,d.jsx)(b,(0,n.Z)((0,n.Z)({ref:t},h),{},{className:i()(s,p,o&&"bg-".concat(o),l&&"text-".concat(l),u&&"border-".concat(u)),children:f?(0,d.jsx)(y,{children:m}):m}))}));B.displayName="Card",B.defaultProps={body:!1};var _=Object.assign(B,{Img:v,Title:N,Subtitle:C,Body:y,Link:P,Text:w,Header:Z,Footer:k,ImgOverlay:S})},96040:function(e,t,a){var n=a(72791).createContext(null);n.displayName="CardHeaderContext",t.Z=n},66543:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(1413),r=a(45987),s=a(81694),i=a.n(s),o=/-(.)/g;var c=a(72791),l=a(10162),u=a(80184),d=["className","bsPrefix","as"],f=function(e){return e[0].toUpperCase()+(t=e,t.replace(o,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.displayName,s=void 0===a?f(e):a,o=t.Component,m=t.defaultProps,v=c.forwardRef((function(t,a){var s=t.className,c=t.bsPrefix,f=t.as,m=void 0===f?o||"div":f,v=(0,r.Z)(t,d),b=(0,l.vE)(c,e);return(0,u.jsx)(m,(0,n.Z)({ref:a,className:i()(s,b)},v))}));return v.defaultProps=m,v.displayName=s,v}},27472:function(e,t,a){var n=a(1413),r=a(72791),s=a(81694),i=a.n(s),o=a(80184);t.Z=function(e){return r.forwardRef((function(t,a){return(0,o.jsx)("div",(0,n.Z)((0,n.Z)({},t),{},{ref:a,className:i()(t.className,e)}))}))}},42391:function(e){var t=function(){};e.exports=t},11752:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(61120);function r(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,n.Z)(e)););return e}function s(){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,a){var n=r(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(arguments.length<3?e:a):s.value}},s.apply(this,arguments)}}}]);
//# sourceMappingURL=5065.a748e8ee.chunk.js.map