"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7704],{26535:function(e,n,t){t.d(n,{Z:function(){return h}});var a=t(1413),r=t(95313),s=t(62591),i=t(43360),c=t(42982),o=t(72791),u=t(8116),l=t(80184),d=function(e,n){var t=n-e+1;return Array.from({length:t},(function(n,t){return t+e}))},f=function(e){var n=e.search,t=e.pagination,r=e.onChange,s=e.siblingCount,i=void 0===s?1:s,f=e.className,h=function(e){var n=e.totalCount,t=e.pageSize,a=e.siblingCount,r=void 0===a?1:a,s=e.currentPage;return(0,o.useMemo)((function(){var e=Math.ceil(n/t);if(r+5>=e)return d(1,e);var a=Math.max(s-r,1),i=Math.min(s+r,e),o=a>2,u=i<e-2,l=1,f=e;if(!o&&u){var h=d(1,3+2*r);return[].concat((0,c.Z)(h),["DOTS",e])}if(o&&!u){var p=d(e-(3+2*r)+1,e);return[l,"DOTS"].concat((0,c.Z)(p))}if(o&&u){var m=d(a,i);return[l,"DOTS"].concat((0,c.Z)(m),["DOTS",f])}}),[n,t,r,s])}({currentPage:t.page,totalCount:t.totalCount,pageSize:t.pageSize,siblingCount:i});if(0===t.page||h.length<1)return null;var p=h[h.length-1];return(0,l.jsxs)(u.Z,{className:f,children:[(0,l.jsx)(u.Z.First,{onClick:function(){r({search:n,pagination:(0,a.Z)((0,a.Z)({},t),{},{page:1})})}}),(0,l.jsx)(u.Z.Prev,{onClick:function(){t.page>1&&r({search:n,pagination:(0,a.Z)((0,a.Z)({},t),{},{page:t.page-1})})}}),h.map((function(e,s){return"DOTS"===e?(0,l.jsx)(u.Z.Ellipsis,{},s):t.page===e?(0,l.jsx)(u.Z.Item,{active:!0,onClick:function(){return r({search:n,pagination:(0,a.Z)((0,a.Z)({},t),{},{page:e})})},children:e},s):(0,l.jsx)(u.Z.Item,{onClick:function(){return r({search:n,pagination:(0,a.Z)((0,a.Z)({},t),{},{page:e})})},children:e},s)})),(0,l.jsx)(u.Z.Next,{onClick:function(){t.page<p&&r({search:n,pagination:(0,a.Z)((0,a.Z)({},t),{},{page:t.page+1})})}}),(0,l.jsx)(u.Z.Last,{onClick:function(){r({search:n,pagination:(0,a.Z)((0,a.Z)({},t),{},{page:p})})}})]})},h=function(e){var n=e.pageItems,t=void 0===n?[5,10,20,50,100]:n,c=e.columns,o=e.data,u=void 0===o?[]:o,d=e.options,h=void 0===d?{responsive:!0,bordered:!0,center:!0}:d,p=e.pagination,m=void 0===p?{page:1,totalCount:10,pageSize:10}:p,g=e.sort,x=e.search,Z=e.onChange,j=e.emptyText,v=void 0===j?"Empty Data":j,y=e.onRow,k=void 0===y?function(){}:y;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,l.jsx)(r.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:m.pageSize,onChange:function(e){return Z({search:x,pagination:(0,a.Z)((0,a.Z)({},m),{},{pageSize:Number(e.target.value),page:1})})},children:t.map((function(e,n){return(0,l.jsx)("option",{value:e,children:e},n)}))}),(0,l.jsx)(r.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&Z({search:e.target.value,pagination:(0,a.Z)((0,a.Z)({},m),{},{page:1})})}(e)}})]}),(0,l.jsxs)(s.Z,{className:"datatable "+(h.center?"text-center":""),responsive:h.responsive,bordered:h.bordered,hover:!0,children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:c.map((function(e,n){return(0,l.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,l.jsxs)(i.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,n){var t="asc";void 0===n?t="asc":"asc"===n.dir?t="desc":"desc"===n.dir&&(t="asc"),Z({search:x,pagination:m,sort:{key:e,dir:t}})}(e.key,g)},children:[("undefined"===typeof g||g.key!==e.key)&&(0,l.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof g&&g.key===e.key&&"asc"===g.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof g&&g.key===e.key&&"desc"===g.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},n)}))})}),(0,l.jsx)("tbody",{children:u.length?u.map((function(e,n){return(0,l.jsx)("tr",{onClick:function(){return k(e._id)},children:c.map((function(t,a){return t.render?(0,l.jsx)("td",{children:t.render(e,n)},a):(0,l.jsx)("td",{children:e[t.key]},a)}))},n)})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:c.length,className:"text-center text-danger",children:v})})})]}),(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,l.jsx)(f,{search:x,pagination:m,onChange:Z})})]})}},27704:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var a=t(74165),r=t(1413),s=t(15861),i=t(70885),c=t(72791),o=t(85239),u=t(45736),l=t(43360),d=t(9140),f=t(95316),h=t(95313),p=t(26535),m=t(37009),g=t(9085),x=t(72426),Z=t.n(x),j=t(80184),v=function(){var e=(0,c.useState)(0),n=(0,i.Z)(e,2),t=n[0],x=n[1],v=(0,c.useState)([]),y=(0,i.Z)(v,2),k=y[0],b=y[1],C=(0,c.useState)(""),w=(0,i.Z)(C,2),N=w[0],S=w[1],z=(0,c.useState)(),A=(0,i.Z)(z,2),D=A[0],P=A[1],M=(0,c.useState)({page:1,totalCount:0,pageSize:10}),T=(0,i.Z)(M,2),B=T[0],H=T[1],O=(0,c.useState)({name:"",email:"",message:""}),R=(0,i.Z)(O,2),E=R[0],I=R[1],L=(0,c.useState)(!1),V=(0,i.Z)(L,2),Y=V[0],F=V[1],_=(0,c.useState)(!1),G=(0,i.Z)(_,2),K=G[0],U=G[1],W=[{key:"_id",name:"No",width:65,render:function(e,n){return n+1}},{key:"name",name:"Name",width:120},{key:"email",name:"Email"},{key:"message",name:"Message",render:function(e){return(0,j.jsx)("div",{className:"message-description",children:e.message})},sortable:!1},{key:"createdAt",name:"Created date",render:function(e){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("i",{className:"fa fa-clock-o"})," ",Z()(e.createdAt).format("YYYY.MM.DD HH:mm:ss")]})},width:185},{key:"status",name:"Status",render:function(e){return e.isRead?(0,j.jsx)(u.Z,{pill:!0,bg:"success",children:"Read"}):(0,j.jsx)(u.Z,{pill:!0,bg:"danger",children:"Not read"})},width:100,sortable:!1},{key:"action",name:"Action",width:90,render:function(e){return(0,j.jsxs)("div",{children:[(0,j.jsx)(l.Z,{variant:"outline-success",className:"me-1","data-tip":"View",size:"sm",onClick:function(){return q(e)},children:(0,j.jsx)("i",{className:"fa fa-eye"})},"1"),(0,j.jsx)(l.Z,{variant:"outline-danger","data-tip":"Delete",size:"sm",onClick:function(){return J(e)},children:(0,j.jsx)("i",{className:"fa fa-trash"})},"2"),(0,j.jsx)(m.Z,{})]})},sortable:!1}];(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("admin/messages",{params:{search:N,length:B.pageSize,page:B.page,sortKey:D?D.key:"",sortDir:D?D.dir:""}});case 2:n=e.sent,t=n.data,b(t.data),H((0,r.Z)((0,r.Z)({},B),{},{totalCount:t.totalCount}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var q=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isRead){e.next=8;break}return e.next=3,o.Z.put("admin/messages/".concat(n._id),{isRead:!0});case 3:r=e.sent,(s=r.data).success?(I(n),x(!t),F(!0)):g.Am.error(s.msg),e.next=10;break;case 8:I(n),F(!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(n),U(!0);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.delete("admin/messages/".concat(E._id));case 2:n=e.sent,(r=n.data).success?(g.Am.success(r.msg),x(!t),U(!1)):g.Am.error(r.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(d.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,j.jsx)(d.Z.Title,{as:"h5",bsPrefix:"mb-0 card-title text-light",children:"Message management"})}),(0,j.jsx)(d.Z.Body,{children:(0,j.jsx)(p.Z,{columns:W,data:k,sort:D,search:N,pagination:B,onChange:function(e){var n=e.search,a=e.pagination,r=e.sort;P(r),S(n),H(a),x(!t)}})}),(0,j.jsxs)(f.Z,{show:Y,onHide:function(){return F(!1)},children:[(0,j.jsx)(f.Z.Header,{closeButton:!0,children:(0,j.jsxs)(f.Z.Title,{children:["Message ",(0,j.jsxs)("small",{children:["(",Z()(E.createdAt).format("LLL"),")"]})]})}),(0,j.jsxs)(f.Z.Body,{children:[(0,j.jsx)(h.Z.Group,{className:"mb-3",children:(0,j.jsx)(h.Z.Control,{defaultValue:E.name,readOnly:!0})}),(0,j.jsx)(h.Z.Group,{className:"mb-3",children:(0,j.jsx)(h.Z.Control,{defaultValue:E.email,readOnly:!0})}),(0,j.jsx)(h.Z.Group,{children:(0,j.jsx)(h.Z.Control,{as:"textarea",defaultValue:E.message,rows:10})})]}),(0,j.jsx)(f.Z.Footer,{children:(0,j.jsx)(l.Z,{variant:"danger",onClick:function(){return F(!1)},children:"Close"})})]}),(0,j.jsxs)(f.Z,{show:K,onHide:function(){return U(!1)},children:[(0,j.jsx)(f.Z.Header,{children:(0,j.jsx)(f.Z.Title,{children:"Are you sure?"})}),(0,j.jsx)(f.Z.Body,{children:"Deleting is permanent and cannot be undone."}),(0,j.jsxs)(f.Z.Footer,{children:[(0,j.jsxs)(l.Z,{variant:"primary",onClick:Q,children:[(0,j.jsx)("i",{className:"fa fa-thumbs-up"})," Yes"]}),(0,j.jsxs)(l.Z,{variant:"danger",onClick:function(){return U(!1)},children:[(0,j.jsx)("i",{className:"fa fa-thumbs-down"})," No"]})]})]})]})}},85239:function(e,n,t){var a=t(61044),r=function(){return window.localStorage.getItem("token")?localStorage.getItem("token"):null},s=a.ZP.create({baseURL:"/api/v1/",timeout:15e3,headers:{Authorization:"Bearer ".concat(r())}});s.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(r()),e})),s.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status&&403!==e.response.status&&406!==e.response.status||(window.localStorage.clear(),window.location.href="/login"),Promise.reject(e)})),n.Z=s},45736:function(e,n,t){var a=t(1413),r=t(45987),s=t(81694),i=t.n(s),c=t(72791),o=t(10162),u=t(80184),l=["bsPrefix","bg","pill","text","className","as"],d=c.forwardRef((function(e,n){var t=e.bsPrefix,s=e.bg,c=e.pill,d=e.text,f=e.className,h=e.as,p=void 0===h?"span":h,m=(0,r.Z)(e,l),g=(0,o.vE)(t,"badge");return(0,u.jsx)(p,(0,a.Z)((0,a.Z)({ref:n},m),{},{className:i()(f,g,c&&"rounded-pill",d&&"text-".concat(d),s&&"bg-".concat(s))}))}));d.displayName="Badge",d.defaultProps={bg:"primary",pill:!1},n.Z=d}}]);
//# sourceMappingURL=7704.82eaf0f8.chunk.js.map