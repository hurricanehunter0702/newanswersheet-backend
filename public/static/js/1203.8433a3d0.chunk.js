"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1203],{21203:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(74165),a=t(15861),s=t(70885),c=t(72791),o=t(57689),i=t(11087),u=t(59434),l=t(76887),f=t(43360),p=t(9085),m=t(85239),d=t(80184),g=function(){var e=(0,o.UO)().gateway,n=(0,i.useSearchParams)(),t=(0,s.Z)(n,1)[0],g=(0,c.useState)(),v=(0,s.Z)(g,2),h=v[0],Z=v[1],k=(0,c.useState)(),w=(0,s.Z)(k,2),x=w[0],y=w[1],b=(0,o.s0)(),I=(0,u.I0)();(0,c.useEffect)((function(){document.title="AnswerSheet - HSC made easy";var n=function(){var s=(0,a.Z)((0,r.Z)().mark((function s(){return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:I((0,l.K4)(!0)),setTimeout((0,a.Z)((0,r.Z)().mark((function a(){var s,c,o,i,u;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.get("history_id"),"paypal"===e?(s=t.get("paymentId"),c=t.get("PayerID")):"stripe"===e&&(s=t.get("session_id"),c=0),r.next=4,m.Z.get("billing/".concat(e,"/return?paymentId=").concat(s,"&payerId=").concat(c,"&historyId=").concat(o));case 4:if(i=r.sent,u=i.data,console.log("OOOKKK=====>",u),!u.success){r.next=14;break}Z(u.email),y(u.invoiceId),I((0,l.K4)(!1)),p.Am.success(u.msg),r.next=21;break;case 14:if(!u.retry){r.next=19;break}return r.next=17,n();case 17:r.next=21;break;case 19:I((0,l.K4)(!1)),p.Am.error(u.msg);case 21:case"end":return r.stop()}}),a)}))),2500),b("/current-membership");case 3:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();n()}),[]);var S=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.post("billing/invoice",{email:h,invoiceId:x});case 2:n=e.sent,(t=n.data).success?(p.Am.success(t.msg),b("/login")):(p.Am.error(t.msg),b("/login"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"billing-success-container",children:[(0,d.jsxs)(f.Z,{variant:"primary",className:"me-3",onClick:S,children:[(0,d.jsx)("i",{className:"fa fa-envelope"})," Receive invoice"]}),(0,d.jsxs)(f.Z,{variant:"danger",onClick:function(){return b("/login")},children:[(0,d.jsx)("i",{className:"fa fa-undo"})," Back to login"]})]})}},85239:function(e,n,t){var r=t(61044),a=function(){return window.localStorage.getItem("token")?localStorage.getItem("token"):null},s=r.ZP.create({baseURL:"/api/v1/",timeout:15e3,headers:{Authorization:"Bearer ".concat(a())}});s.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(a()),e})),s.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status&&403!==e.response.status&&406!==e.response.status||(window.localStorage.clear(),window.location.href="/login"),Promise.reject(e)})),n.Z=s}}]);
//# sourceMappingURL=1203.8433a3d0.chunk.js.map