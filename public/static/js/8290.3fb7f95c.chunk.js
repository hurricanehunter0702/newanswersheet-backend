"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8290],{26535:function(e,n,a){a.d(n,{Z:function(){return h}});var r=a(1413),t=a(95313),s=a(62591),i=a(43360),c=a(42982),o=a(72791),l=a(8116),d=a(80184),u=function(e,n){var a=n-e+1;return Array.from({length:a},(function(n,a){return a+e}))},f=function(e){var n=e.search,a=e.pagination,t=e.onChange,s=e.siblingCount,i=void 0===s?1:s,f=e.className,h=function(e){var n=e.totalCount,a=e.pageSize,r=e.siblingCount,t=void 0===r?1:r,s=e.currentPage;return(0,o.useMemo)((function(){var e=Math.ceil(n/a);if(t+5>=e)return u(1,e);var r=Math.max(s-t,1),i=Math.min(s+t,e),o=r>2,l=i<e-2,d=1,f=e;if(!o&&l){var h=u(1,3+2*t);return[].concat((0,c.Z)(h),["DOTS",e])}if(o&&!l){var m=u(e-(3+2*t)+1,e);return[d,"DOTS"].concat((0,c.Z)(m))}if(o&&l){var p=u(r,i);return[d,"DOTS"].concat((0,c.Z)(p),["DOTS",f])}}),[n,a,t,s])}({currentPage:a.page,totalCount:a.totalCount,pageSize:a.pageSize,siblingCount:i});if(0===a.page||h.length<1)return null;var m=h[h.length-1];return(0,d.jsxs)(l.Z,{className:f,children:[(0,d.jsx)(l.Z.First,{onClick:function(){t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:1})})}}),(0,d.jsx)(l.Z.Prev,{onClick:function(){a.page>1&&t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:a.page-1})})}}),h.map((function(e,s){return"DOTS"===e?(0,d.jsx)(l.Z.Ellipsis,{},s):a.page===e?(0,d.jsx)(l.Z.Item,{active:!0,onClick:function(){return t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:e})})},children:e},s):(0,d.jsx)(l.Z.Item,{onClick:function(){return t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:e})})},children:e},s)})),(0,d.jsx)(l.Z.Next,{onClick:function(){a.page<m&&t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:a.page+1})})}}),(0,d.jsx)(l.Z.Last,{onClick:function(){t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:m})})}})]})},h=function(e){var n=e.pageItems,a=void 0===n?[5,10,20,50,100]:n,c=e.columns,o=e.data,l=void 0===o?[]:o,u=e.options,h=void 0===u?{responsive:!0,bordered:!0,center:!0}:u,m=e.pagination,p=void 0===m?{page:1,totalCount:10,pageSize:10}:m,x=e.sort,v=e.search,Z=e.onChange,g=e.emptyText,j=void 0===g?"Empty Data":g,b=e.onRow,y=void 0===b?function(){}:b;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,d.jsx)(t.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:p.pageSize,onChange:function(e){return Z({search:v,pagination:(0,r.Z)((0,r.Z)({},p),{},{pageSize:Number(e.target.value),page:1})})},children:a.map((function(e,n){return(0,d.jsx)("option",{value:e,children:e},n)}))}),(0,d.jsx)(t.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&Z({search:e.target.value,pagination:(0,r.Z)((0,r.Z)({},p),{},{page:1})})}(e)}})]}),(0,d.jsxs)(s.Z,{className:"datatable "+(h.center?"text-center":""),responsive:h.responsive,bordered:h.bordered,hover:!0,children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:c.map((function(e,n){return(0,d.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,d.jsxs)(i.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,n){var a="asc";void 0===n?a="asc":"asc"===n.dir?a="desc":"desc"===n.dir&&(a="asc"),Z({search:v,pagination:p,sort:{key:e,dir:a}})}(e.key,x)},children:[("undefined"===typeof x||x.key!==e.key)&&(0,d.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof x&&x.key===e.key&&"asc"===x.dir&&(0,d.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof x&&x.key===e.key&&"desc"===x.dir&&(0,d.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},n)}))})}),(0,d.jsx)("tbody",{children:l.length?l.map((function(e,n){return(0,d.jsx)("tr",{onClick:function(){return y(e._id)},children:c.map((function(a,r){return a.render?(0,d.jsx)("td",{children:a.render(e,n)},r):(0,d.jsx)("td",{children:e[a.key]},r)}))},n)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:c.length,className:"text-center text-danger",children:j})})})]}),(0,d.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,d.jsx)(f,{search:v,pagination:p,onChange:Z})})]})}},58290:function(e,n,a){a.r(n);var r=a(74165),t=a(1413),s=a(15861),i=a(70885),c=a(72791),o=a(78983),l=a(9140),d=a(43360),u=a(95313),f=a(55705),h=a(81724),m=a(26535),p=a(85239),x=a(9085),v=a(80184);n.default=function(){var e=(0,c.useState)({name:"",description:""}),n=(0,i.Z)(e,2),a=n[0],Z=n[1],g=(0,c.useState)(!1),j=(0,i.Z)(g,2),b=j[0],y=j[1],C=(0,c.useState)(!1),N=(0,i.Z)(C,2),k=N[0],w=N[1],S=(0,c.useState)(!1),P=(0,i.Z)(S,2),z=P[0],B=P[1],D=(0,c.useState)(!1),E=(0,i.Z)(D,2),I=E[0],O=E[1],T=(0,c.useState)([]),A=(0,i.Z)(T,2),R=A[0],Y=A[1],L=(0,c.useState)(),M=(0,i.Z)(L,2),F=M[0],G=M[1],V=(0,c.useState)(""),_=(0,i.Z)(V,2),H=_[0],q=_[1],U=(0,c.useState)({page:1,totalCount:0,pageSize:10}),J=(0,i.Z)(U,2),K=J[0],W=J[1],Q=[{key:"_id",name:"No",width:65,render:function(e,n){return n+1}},{key:"name",name:"Name"},{key:"",name:"Action",render:function(e){return(0,v.jsxs)("div",{children:[(0,v.jsx)(o.u5,{color:"outline-success",size:"sm",className:"me-1",onClick:function(){return ee(e)},children:(0,v.jsx)("i",{className:"fa fa-edit"})}),(0,v.jsx)(o.u5,{color:"outline-danger",size:"sm",onClick:function(){return ae(e)},children:(0,v.jsx)("i",{className:"fa fa-trash"})})]})},width:90,sortable:!1}],X=h.Ry({name:h.Z_("Enter a year name.").test("len","Must be less than 64 characters.",(function(e){return e.length<64})).required("Year name is required.")});(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.get("admin/years",{params:{search:H,length:K.pageSize,page:K.page,sortKey:F?F.key:"",sortDir:F?F.dir:""}});case 2:n=e.sent,a=n.data,Y(a.data),W((0,t.Z)((0,t.Z)({},K),{},{totalCount:a.totalCount}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[b]);var $=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.post("admin/years",n);case 2:a=e.sent,(t=a.data).success?(x.Am.success(t.msg),w(!1),y(!b)):x.Am.error(t.msg);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(e){Z({id:e._id,name:e.name,description:e.description?e.description:""}),B(!0)},ne=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.put("admin/years/".concat(n.id),{name:n.name,description:n.description});case 2:a=e.sent,(t=a.data).success?(x.Am.success(t.msg),B(!1),y(!b)):x.Am.error(t.msg);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function(e){Z(e),O(!0)},re=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.delete("/admin/years/".concat(a._id));case 2:n=e.sent,(t=n.data).success?(x.Am.success(t.msg),O(!1),y(!b)):x.Am.error(t.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(l.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,v.jsxs)(l.Z.Title,{bsPrefix:"card-title mb-0 text-light",as:"h5",children:["Years management",(0,v.jsxs)(d.Z,{variant:"primary",size:"sm",className:"float-end",onClick:function(){Z({name:"",description:""}),w(!0)},children:[(0,v.jsx)("i",{className:"fa fa-plus"})," New year"]})]})}),(0,v.jsxs)(l.Z.Body,{children:[(0,v.jsx)(m.Z,{columns:Q,data:R,sort:F,search:H,pagination:K,onChange:function(e){var n=e.search,a=e.pagination,r=e.sort;G(void 0===r?{}:r),q(n),W(a),y(!b)}}),(0,v.jsx)(o.Tk,{visible:k,onClose:function(){return w(!1)},children:(0,v.jsx)(f.J9,{validationSchema:X,validateOnChange:!1,validateOnBlur:!1,onSubmit:$,initialValues:a,children:function(e){var n=e.handleSubmit,a=e.handleChange,r=e.handleBlur,t=e.values,s=e.touched,i=e.errors;return(0,v.jsxs)(u.Z,{noValidate:!0,onSubmit:n,children:[(0,v.jsx)(o.p0,{children:(0,v.jsx)(o.fl,{children:"New year"})}),(0,v.jsxs)(o.sD,{children:[(0,v.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,v.jsx)(u.Z.Control,{type:"text",placeholder:"Year name",name:"name",onChange:a,onBlur:r,value:t.name,touched:s,isInvalid:!!i.name}),(0,v.jsx)(u.Z.Control.Feedback,{type:"invalid",children:i.name})]}),(0,v.jsx)(u.Z.Group,{className:"mb-3",children:(0,v.jsx)(u.Z.Control,{as:"textarea",rows:"5",placeholder:"Year description",name:"description",value:t.description,onChange:a,onBlur:r})})]}),(0,v.jsxs)(o.Ym,{children:[(0,v.jsxs)(o.u5,{type:"submit",color:"primary",children:[(0,v.jsx)("i",{className:"fa fa-save"})," Save"]}),(0,v.jsxs)(o.u5,{color:"danger",onClick:function(){return w(!1)},children:[(0,v.jsx)("i",{className:"fa fa-times"})," Cancel"]})]})]})}})}),(0,v.jsx)(o.Tk,{visible:z,onClose:function(){return B(!1)},children:(0,v.jsx)(f.J9,{validationSchema:X,validateOnChange:!1,validateOnBlur:!1,onSubmit:ne,initialValues:a,children:function(e){var n=e.handleSubmit,a=e.handleChange,r=e.handleBlur,t=e.values,s=e.touched,i=e.errors;return(0,v.jsxs)(u.Z,{noValidate:!0,onSubmit:n,children:[(0,v.jsx)(o.p0,{children:(0,v.jsx)(o.fl,{children:"Edit year"})}),(0,v.jsxs)(o.sD,{children:[(0,v.jsx)(u.Z.Group,{children:(0,v.jsx)(u.Z.Control,{type:"hidden",value:t.id})}),(0,v.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,v.jsx)(u.Z.Control,{type:"text",placeholder:"Year name",name:"name",onChange:a,onBlur:r,value:t.name,touched:s,isInvalid:!!i.name}),(0,v.jsx)(u.Z.Control.Feedback,{type:"invalid",children:i.name})]}),(0,v.jsx)(u.Z.Group,{children:(0,v.jsx)(u.Z.Control,{as:"textarea",rows:"5",placeholder:"Year description",name:"description",value:t.description,onChange:a,onBlur:r})})]}),(0,v.jsxs)(o.Ym,{children:[(0,v.jsxs)(o.u5,{type:"submit",color:"primary",children:[(0,v.jsx)("i",{className:"fa fa-save"})," Update"]}),(0,v.jsxs)(o.u5,{color:"danger",onClick:function(){return B(!1)},children:[(0,v.jsx)("i",{className:"fa fa-times"})," Cancel"]})]})]})}})}),(0,v.jsxs)(o.Tk,{visible:I,onClose:function(){return O(!1)},children:[(0,v.jsx)(o.p0,{children:(0,v.jsx)(o.fl,{children:"Are you sure?"})}),(0,v.jsx)(o.sD,{children:"Deleting is permanent and cannot be undone."}),(0,v.jsxs)(o.Ym,{children:[(0,v.jsxs)(o.u5,{color:"primary",onClick:re,children:[(0,v.jsx)("i",{className:"fa fa-thumbs-up"})," Delete"]}),(0,v.jsxs)(o.u5,{color:"danger",onClick:function(){return O(!1)},children:[(0,v.jsx)("i",{className:"fa fa-thumbs-down"})," Cancel"]})]})]})]})]})}},85239:function(e,n,a){var r=a(61044),t=function(){return window.localStorage.getItem("token")?localStorage.getItem("token"):null},s=r.ZP.create({baseURL:"/api/v1/",timeout:15e3,headers:{Authorization:"Bearer ".concat(t())}});s.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(t()),e})),s.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status&&403!==e.response.status&&406!==e.response.status||(window.localStorage.clear(),window.location.href="/login"),Promise.reject(e)})),n.Z=s},9140:function(e,n,a){a.d(n,{Z:function(){return B}});var r=a(1413),t=a(45987),s=a(81694),i=a.n(s),c=a(72791),o=a(10162),l=a(66543),d=a(27472),u=a(80184),f=["bsPrefix","className","variant","as"],h=c.forwardRef((function(e,n){var a=e.bsPrefix,s=e.className,c=e.variant,l=e.as,d=void 0===l?"img":l,h=(0,t.Z)(e,f),m=(0,o.vE)(a,"card-img");return(0,u.jsx)(d,(0,r.Z)({ref:n,className:i()(c?"".concat(m,"-").concat(c):m,s)},h))}));h.displayName="CardImg";var m=h,p=a(96040),x=["bsPrefix","className","as"],v=c.forwardRef((function(e,n){var a=e.bsPrefix,s=e.className,l=e.as,d=void 0===l?"div":l,f=(0,t.Z)(e,x),h=(0,o.vE)(a,"card-header"),m=(0,c.useMemo)((function(){return{cardHeaderBsPrefix:h}}),[h]);return(0,u.jsx)(p.Z.Provider,{value:m,children:(0,u.jsx)(d,(0,r.Z)((0,r.Z)({ref:n},f),{},{className:i()(s,h)}))})}));v.displayName="CardHeader";var Z=v,g=["bsPrefix","className","bg","text","border","body","children","as"],j=(0,d.Z)("h5"),b=(0,d.Z)("h6"),y=(0,l.Z)("card-body"),C=(0,l.Z)("card-title",{Component:j}),N=(0,l.Z)("card-subtitle",{Component:b}),k=(0,l.Z)("card-link",{Component:"a"}),w=(0,l.Z)("card-text",{Component:"p"}),S=(0,l.Z)("card-footer"),P=(0,l.Z)("card-img-overlay"),z=c.forwardRef((function(e,n){var a=e.bsPrefix,s=e.className,c=e.bg,l=e.text,d=e.border,f=e.body,h=e.children,m=e.as,p=void 0===m?"div":m,x=(0,t.Z)(e,g),v=(0,o.vE)(a,"card");return(0,u.jsx)(p,(0,r.Z)((0,r.Z)({ref:n},x),{},{className:i()(s,v,c&&"bg-".concat(c),l&&"text-".concat(l),d&&"border-".concat(d)),children:f?(0,u.jsx)(y,{children:h}):h}))}));z.displayName="Card",z.defaultProps={body:!1};var B=Object.assign(z,{Img:m,Title:C,Subtitle:N,Body:y,Link:k,Text:w,Header:Z,Footer:S,ImgOverlay:P})},8116:function(e,n,a){a.d(n,{Z:function(){return C}});var r=a(1413),t=a(45987),s=a(81694),i=a.n(s),c=a(72791),o=a(10162),l=a(16445),d=a(80184),u=["active","disabled","className","style","activeLabel","children"],f=["children"],h=c.forwardRef((function(e,n){var a=e.active,s=e.disabled,c=e.className,o=e.style,f=e.activeLabel,h=e.children,m=(0,t.Z)(e,u),p=a||s?"span":l.Z;return(0,d.jsx)("li",{ref:n,style:o,className:i()(c,"page-item",{active:a,disabled:s}),children:(0,d.jsxs)(p,(0,r.Z)((0,r.Z)({className:"page-link"},m),{},{children:[h,a&&f&&(0,d.jsx)("span",{className:"visually-hidden",children:f})]}))})}));h.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},h.displayName="PageItem";var m=h;function p(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=c.forwardRef((function(e,s){var i=e.children,c=(0,t.Z)(e,f);return(0,d.jsxs)(h,(0,r.Z)((0,r.Z)({},c),{},{ref:s,children:[(0,d.jsx)("span",{"aria-hidden":"true",children:i||n}),(0,d.jsx)("span",{className:"visually-hidden",children:a})]}))}));return s.displayName=e,s}var x=p("First","\xab"),v=p("Prev","\u2039","Previous"),Z=p("Ellipsis","\u2026","More"),g=p("Next","\u203a"),j=p("Last","\xbb"),b=["bsPrefix","className","size"],y=c.forwardRef((function(e,n){var a=e.bsPrefix,s=e.className,c=e.size,l=(0,t.Z)(e,b),u=(0,o.vE)(a,"pagination");return(0,d.jsx)("ul",(0,r.Z)((0,r.Z)({ref:n},l),{},{className:i()(s,u,c&&"".concat(u,"-").concat(c))}))}));y.displayName="Pagination";var C=Object.assign(y,{First:x,Prev:v,Ellipsis:Z,Item:m,Next:g,Last:j})},62591:function(e,n,a){var r=a(1413),t=a(45987),s=a(81694),i=a.n(s),c=a(72791),o=a(10162),l=a(80184),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=c.forwardRef((function(e,n){var a=e.bsPrefix,s=e.className,c=e.striped,u=e.bordered,f=e.borderless,h=e.hover,m=e.size,p=e.variant,x=e.responsive,v=(0,t.Z)(e,d),Z=(0,o.vE)(a,"table"),g=i()(s,Z,p&&"".concat(Z,"-").concat(p),m&&"".concat(Z,"-").concat(m),c&&"".concat(Z,"-").concat("string"===typeof c?"striped-".concat(c):"striped"),u&&"".concat(Z,"-bordered"),f&&"".concat(Z,"-borderless"),h&&"".concat(Z,"-hover")),j=(0,l.jsx)("table",(0,r.Z)((0,r.Z)({},v),{},{className:g,ref:n}));if(x){var b="".concat(Z,"-responsive");return"string"===typeof x&&(b="".concat(b,"-").concat(x)),(0,l.jsx)("div",{className:b,children:j})}return j}));n.Z=u}}]);
//# sourceMappingURL=8290.3fb7f95c.chunk.js.map